{% extends "base.html" %}

{% block title %}
    {% if mode == 'add' %}
        Add New Customer
    {% else %}
        Edit Customer
    {% endif %}
{% endblock %}

{% block content %}
    <nav class="main-nav">
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <a href="{{ url_for('customer_management') }}" class="active">Customers</a>
        <a href="{{ url_for('profile') }}">Profile</a>
    </nav>

    <div class="form-container">
        {% if mode == 'add' %}
            <h2>Add New Customer</h2>
            <form action="{{ url_for('add_customer') }}" method="POST">
        {% else %}
            <h2>Edit Customer: {{ customer.name }}</h2>
            <form action="{{ url_for('edit_customer', customer_id=customer.id) }}" method="POST">
        {% endif %}
            
            <h3>Billing Details</h3>
            <div class="form-grid">
                <div class="form-group span-2">
                    <label for="name">Customer Name</label>
                    <input type="text" id="name" name="name" value="{{ customer.name or '' }}" required>
                </div>
                <div class="form-group">
                    <label for="contact_person">Contact Person (optional)</label>
                    <input type="text" id="contact_person" name="contact_person" value="{{ customer.contact_person or '' }}">
                </div>
                <div class="form-group">
                    <label for="gstin">GSTIN (optional)</label>
                    <input type="text" id="gstin" name="gstin" value="{{ customer.gstin or '' }}">
                </div>
                <div class="form-group span-3">
                    <label for="billing_address">Billing Address</label>
                    <textarea id="billing_address" name="billing_address" rows="3" required>{{ customer.billing_address or '' }}</textarea>
                </div>
                 <div class="form-group">
                    <label for="state">State (e.g., 24-Gujarat)</label>
                    <input type="text" id="state" name="state" value="{{ customer.state or '' }}">
                </div>
            </div>
            
            <h3>Shipping Details</h3>
            <div class="form-grid">
                <div class="form-group span-4">
                    <label for="shipping_address">Shipping Address (optional)</label>
                    <textarea id="shipping_address" name="shipping_address" rows="3" placeholder="Leave blank to use billing address">{{ customer.shipping_address or '' }}</textarea>
                </div>
            </div>

            <div class="form-actions">
                <a href="{{ url_for('customer_management') }}" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn">
                    {% if mode == 'add' %}
                        Save Customer
                    {% else %}
                        Update Customer
                    {% endif %}
                </button>
            </div>
        </form>
    </div>
{% endblock %}